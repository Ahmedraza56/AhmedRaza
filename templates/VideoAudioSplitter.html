<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Video and Audio Splitter for Video Editors</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<style>
  body {
      background-color: #1054a8;
      font-family:"Ubuntu",sans-serif;
      justify-content: center;
      align-items: center;
      margin-top:15%;
  }

  .container {
      width: 800px;
      padding: 20px;
      border: rounded shadow;
      border-radius: 5px;
      background-color: #f5f5f5;
      
  }
  h1{
      color: #f5f5f5;
      
  }

</style>

<body>
<h1 class="mb-4 text-center">Video and Audio Splitter for Video Editors</h1>

<div class="container">
  
  {% if error %}
    <div class="alert alert-danger" role="alert">
      {{ error }}
    </div>
  {% endif %}

  <form method="post" enctype="multipart/form-data" onsubmit="return validateForm()">
    <div class="form-group">
      <label for="file">Choose a video...</label>
      <input type="file" class="form-control-file" id="file" name="file" accept=".mp4">
    </div>
    <button type="submit" class="btn btn-primary">Process Video</button>
  </form>

  {% if audio and video %}
    <div class="mt-3">
      <a href="{{ url_for('VideoAudioSplitter.download', filename='processed_video.mp4') }}" class="btn btn-success">Download Video</a>
      <a href="{{ url_for('VideoAudioSplitter.download', filename='combined.wav') }}" class="btn btn-success">Download Audio</a>
    </div>
  {% endif %}

</div>
<script>
  function validateForm() {
    var fileInput = document.getElementById('file');
    
    if (fileInput.files.length === 0) {
      alert('Please select a file.');
      return false;
    }

    var allowedExtensions = ['.mp4'];
    var fileSizeLimit = 30 * 1024 * 1024; // 30MB

    var fileName = fileInput.files[0].name;
    var fileExtension = fileName.slice(((fileName.lastIndexOf(".") - 1) >>> 0) + 2);

    if (!allowedExtensions.includes(fileExtension.toLowerCase())) {
      alert('Invalid file type. Please select an MP4 file.');
      return false;
    }

    if (fileInput.files[0].size > fileSizeLimit) {
      alert('File size exceeds the limit of 30MB.');
      return false;
    }

    return true;
  }
</script>

</body>
</html>
